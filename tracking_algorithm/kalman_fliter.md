# **Kalman Fliter**
*卡尔曼滤波（Kalman Filter，KF）以贝叶斯滤波为理论基础，并通过:*
- 假设 **状态量随机变量（以下简称状态量）**、**观测量**均服从**正态分布**
- 假设 **过程噪声**、**观测噪声**均服从**均值为 0 的正态分布**，- 假设 **状态转移函数**和**观测函数**均为**线性函数**，实现对连续型随机过程的递推状态估计。简言之，卡尔曼滤波是在贝叶斯滤波框架下求解线性高斯问题。

## 认识卡尔曼滤波

假设有一个小机器人在一片树林，它需要**准确的知道自己的位置**以便能够**向目标点移动**。

例如，我们可以用一个状态向量（位置和速度）来表述 $k$ 时刻的状态：

$$
\vec x_k = (\vec p, \vec v)
$$

注意**状态向量**可以是任何东西，只要能够表示系统当前状态的量，都可以放在状态向量中。在本例子中，状态向量是位置和速度，当然滤波的状态量可以是油罐的油量、发动机的温度或者手指在触摸板上的位置，万物都可以模型化，就意味着万物均可卡尔曼。

假设机器人是带有一个精度 $10cm$ 的GPS定位，当时实际情况中，这个精度无法满足机器人的定位需求，森林里面有遮挡（树木盖住信号）、路况复杂有悬崖，精度不够容易掉下去， 因此仅仅依靠GPS定位信息无法满足机器人的定位需求。

我们同时知道机器人的运动特性，机器人接受到控制指令后，会根据指令控制轮子上的电机调整相应转速，同时，机器人也会根据自身的运动状态推算出自己当前的朝向，理论上来说，是可以根据机器人的**轮子转速**来更新机器人的位置和朝向信息的。然而实际情况是，机器人的运动会受到各种影响（风、轮子打滑）或者道路过于崎岖都会对机器人运动状态的估算造成影响。因此，不能单纯的使用轮子转动的圈数来表示机器人行驶过的路程，同样的，也不能单纯的用机器人的轮子去推算机器人当前位置的朝向信息。

目前可以通过两种方式来确定机器人的位置信息：

第一种，通过机器人自带的GPS定位，但是这种方式噪声太大，定位精度不够，

第二种，通过机器人自身的轮速信息，对机器人现有位置进行预测，这种方式，会因为外界环境的影响，造成对位置的估算不准确。

综合来看，机器人的位置信息，可以有两种方式获得，

1. 通过传感器直接观测，但是传感器测量有误差

2. 通过机器人运动学方程进行推算，但是会有干扰，会导致机器人位置估算有误差，误差会随着机器人的行驶不断积累，位置精度也会很大。

那么有没有一种方式，能让我们利用所有的可用信息，来提高机器人的定位信息呢？ 卡尔曼可以计算最有估计。

## 卡尔曼滤波原理

用一个状态向量表示当前机器人的状态，状态量包括位置和速度两个信息，

$$
\vec x = 
\left[ \begin {array}{}
p \\
v
\end{array}\right]
$$
